---
title: "上手 linux \U0001F60B"
tags:
  - note
categories:
  - linux
cover: 'https://i.loli.net/2021/02/22/w238AWI4upd9Vsz.jpg'
excerpt: 软件的安装和常用指令
date: 2020-11-05 00:00:00
link:
---

<h3 id="安装-pip"><a href="#安装-pip" class="headerlink" title="安装 pip"></a>安装 pip</h3><ul><li><code>cd /home &amp; mkdir pip</code>找个目录下载安装脚本</li><li><code>wget https://bootstrap.pypa.io/get-pip.py</code>开始下载</li><li><code>python3 get-pip.py</code>开始安装（<code>python</code>版本不能小于<code>3.6</code>）</li><li><code>pip -V</code>查看版本确认是否成功安装<ul><li>出现<code>notfound</code>，把<code>pip</code>加到环境变量<code>echo 'export PATH=/usr/local/python/python3/bin:$PATH' &gt;&gt;~/.bashrc</code></li><li><code>source ~/.bashrc</code></li></ul></li><li><code>pip install name</code>安装（如：<code>pip install jupyterlab</code>）</li><li><code>pip uninstall name</code>卸载（如：<code>pip uninstall jupyterlab</code>）</li><li><code>yum remove python-pip</code>据说这样可以卸载<code>pip</code>，没试过</li></ul><h3 id="安装-yum"><a href="#安装-yum" class="headerlink" title="安装 yum"></a>安装 yum</h3><ul><li><code>rpm -aq | grep yum</code>检查<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum-metadata-parser-1.1.4-10.el7.x86_64</span><br><span class="line">yum-plugin-fastestmirror-1.1.31-54.el7_8.noarch</span><br><span class="line">yum-langpacks-0.4.2-7.el7.noarch</span><br><span class="line">yum-plugin-versionlock-1.1.31-54.el7_8.noarch</span><br><span class="line">yum-3.4.3-168.el7.centos.noarch</span><br><span class="line">yum-plugin-copr-1.1.31-54.el7_8.noarch</span><br><span class="line">yum-utils-1.1.31-54.el7_8.noarch</span><br></pre></td></tr></tbody></table></figure></li><li><code>rpm -qa|grep yum|xargs rpm -e --nodeps</code>删除老的</li><li>下载地址<a target="_blank" rel="noopener" href="https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/">https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/</a> or <a target="_blank" rel="noopener" href="http://centos.ustc.edu.cn/centos/7/os/x86_64/Packages/">http://centos.ustc.edu.cn/centos/7/os/x86_64/Packages/</a></li><li>以下参考<a target="_blank" rel="noopener" href="https://www.cnblogs.com/silva/p/14517829.html">https://www.cnblogs.com/silva/p/14517829.html</a><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/lvm2-python-libs-2.02.187-6.el7.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/libxml2-python-2.9.1-6.el7.5.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-libs-2.7.5-89.el7.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-ipaddress-1.0.16-2.el7.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-backports-1.0-8.el7.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-backports-ssl_match_hostname-3.5.0.1-1.el7.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-2.7.5-89.el7.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-iniparse-0.4-9.el7.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-pycurl-7.19.0-19.el7.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-urlgrabber-3.10-10.el7.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-setuptools-0.9.8-7.el7.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-kitchen-1.1.1-5.el7.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/python-chardet-2.2.1-3.el7.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/rpm-python-4.11.3-45.el7.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-utils-1.1.31-54.el7_8.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-3.4.3-168.el7.centos.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-metadata-parser-1.1.4-10.el7.x86_64.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-aliases-1.1.31-54.el7_8.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-protectbase-1.1.31-54.el7_8.noarch.rpm &amp;</span><br><span class="line">wget https://mirrors.aliyun.com/centos/7/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.31-54.el7_8.noarch.rpm</span><br></pre></td></tr></tbody></table></figure></li><li>安装<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh --replacepkgs lvm2-python-libs*.rpm --nodeps --force &amp;</span><br><span class="line">rpm -Uvh --replacepkgs libxml2-python*.rpm --nodeps --force &amp;</span><br><span class="line">rpm -Uvh --replacepkgs python*.rpm --nodeps --force &amp;</span><br><span class="line">rpm -Uvh --replacepkgs rpm-python*.rpm yum*.rpm --nodeps --force</span><br></pre></td></tr></tbody></table></figure></li><li>更换yum源，以下参考<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bae36e20c74a">https://www.jianshu.com/p/bae36e20c74a</a><ul><li><code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</code>备份原来的源</li><li><code>wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</code>下载</li><li><code>yum makecache</code>生成缓存（有错误）</li><li><code>yum update --disableplugin=subscription-manager</code>尝试不加在插件运行（发现没有错误了，可以禁掉或者删除）</li><li><code>yum autoremove subscription-manager -y</code>删除它</li></ul></li></ul><h3 id="yum-安装"><a href="#yum-安装" class="headerlink" title="yum 安装"></a>yum 安装</h3><blockquote><p>安装<code>git</code></p></blockquote><ul><li><a target="_blank" rel="noopener" href="https://git-scm.com/download/linux">https://git-scm.com/download/linux</a></li><li><code>yum install -y git</code></li><li>配置用户名 邮箱 或 ssh</li></ul><blockquote><p>安装<code>nginx</code></p></blockquote><ul><li><a target="_blank" rel="noopener" href="https://nginx.org/en/linux_packages.html#RHEL-CentOS">nginx</a></li><li>找配置文件姿势：<code>find / -name nginx</code></li><li><a target="_blank" rel="noopener" href="https://www.imooc.com/article/20079?block_id=tuijian_wz">nginx配置</a></li></ul><blockquote><p>安装<code>brew</code><a target="_blank" rel="noopener" href="https://brew.sh/index_zh-cn">官网</a></p></blockquote><ul><li>官网安装方法：<code>/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</code></li><li>内地加速安装方法：<code>/bin/bash -c "$(curl -fsSL https://cdn.jsdelivr.net/gh/code-ba/brew-install@main/install.sh)"</code><ul><li><code>linux</code>安装完成如果不生效，添加下环境变量：</li><li><code>vim /etc/profile</code>编辑</li><li><code>PATH=$PATH:$HOME/bin:/home/cxvh/.linuxbrew/bin</code>添加这一句</li><li><code>source /etc/profile</code>使其生效</li></ul></li></ul><blockquote><p>安装<code>apt-get</code></p></blockquote><ul><li>安装<code>curl https://raw.githubusercontent.com/dvershinin/apt-get-centos/master/apt-get.sh -o /usr/local/bin/apt-get</code></li><li>修改权限<code>chmod 0755 /usr/local/bin/apt-get</code></li><li>使用<code>sudo /usr/local/bin/apt-get install 包名</code> or <code>apt-get install 包名</code></li></ul><h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><table><thead><tr><th>常用命令</th><th>centos7.8</th><th><em>debian</em></th><th><em>ubuntu</em></th></tr></thead><tbody><tr><td>查看操作系统</td><td>lsb_release -a</td><td></td><td></td></tr><tr><td>内核版本</td><td>uname -a</td><td></td><td></td></tr><tr><td>磁盘空间查看</td><td>df<br>df -Th</td><td></td><td></td></tr><tr><td>文件夹命令</td><td>cd Desktop<br>ls -al /c/a.txt<br><code>ls</code>显示不隐藏的文件与文件夹<br><code>ls -la</code>是列出当前目录中的所有文件和目录，包括隐藏文件和目录<br><code>ls -a</code>显示所有文件,包括隐藏文件和目录（以“.”为开始的文件和目录为隐藏文件）<br><code>ls -l</code>长格式列出<br><code>ls -al</code> 显示当前目录下的所有文件及文件夹包括隐藏的.和..等的详细信息</td><td></td><td></td></tr><tr><td>自定义别名</td><td>vim ~/.bashrc——&gt;&gt;&gt;alias ll=”ls -l –color=auto”<br><strong>环境变量配置文件：</strong>~/.bash_profile、~/.zshrc、~/.profile、~/.bash_profile</td><td></td><td></td></tr><tr><td>目录/文件信息</td><td>drwxr-xr-x. 2 Baran root 4096 Oct 29 16:43 Desktop<br>drwxr-xr-x：文件类型和权限。第1位：文件类型，剩余9位：文件权限<br>2：链接数（链接占用的节点i-node），普通文件链接数是1，目录链接数是子目录的个数。空目录有.. 和.目录，所以是2。<br>Baran：当前文件所属用户<br>root：当前文件所属组<br>4096：文件大小<br>Oct 29 16:43：最后修改日期<br>Desktop：文件或文件夹名称</td><td></td><td></td></tr><tr><td>文件类型</td><td>d：目录<br>-：普通文件<br>l：链接文件<br>c：字符设备<br>b：二进制设备文件<br>p：管道</td><td></td><td></td></tr><tr><td>文件权限：rwx r-x r-x</td><td><strong>前3位：</strong>所属用户权限（u）。是否可读，是否可写，是否可执行。每一位可以用二进制0/1表示，3为合起来就是十进制数字。比如rwx，二进制表示就是111，十进制表示就是7。<br><strong>中3位：</strong>所属组权限（g）。是否可读，是否可写，是否可执行。每一位可以用二进制0/1表示，3为合起来就是十进制数字。比如r-x，二进制表示就是101，十进制表示就是5。<br><strong>后3位：</strong>其他用户权限（o）。是否可读，是否可写，是否可执行。每一位可以用二进制0/1表示，3为合起来就是十进制数字。比如r-x，二进制表示就是101，十进制表示就是5。<br><strong>r：</strong>文件（可读取内容）、文件夹（可以 ls）<br><strong>w：</strong>文件（可修改文件的内容）、文件夹（可以在其中创建或者删除子节点）<br><strong>x：</strong>文件（能否运行这个文件）、文件夹（能否cd进入这个目录，或者 sh ./这个文件 能执行）</td><td></td><td></td></tr><tr><td>修改文件权限</td><td><code>chmod g-rw haha.txt</code> 表示将<code>haha.txt</code>对所属组的rw权限取消<br><code>chmod o-rw haha.txt</code>表示将<code>haha.txt</code>对其他人的rw权限取消<br><code>chmod u+x haha.txt</code>表示将<code>haha.txt</code>对所属用户的权限增加x<br><code>chmod a-x haha.txt</code>表示将<code>haha.txt</code>对所有用户取消x权限<br><code>chmod 664 haha.txt</code>也可以用数字的方式来修改权限，就会改成<code>rw-rw-r--</code><br><code>chmod -R 770 aaa/</code>将文件夹的所有内容权限统一修改，则可使用<code>-R</code>参数</td><td></td><td></td></tr><tr><td><code>CPU</code>/内存/进程</td><td>top（可按 m）</td><td></td><td></td></tr><tr><td>切换为管理员</td><td>sudo su</td><td></td><td></td></tr><tr><td>安装<code>curl</code></td><td>sudo apt install curl</td><td></td><td></td></tr><tr><td>更新 apt apt-get</td><td>sudo apt update &amp;&amp; sudo apt upgrade or apt-get update</td><td></td><td></td></tr><tr><td>创建用户</td><td>useradd cxvh2021（创建完成 home 文件夹下会有新建用户名文件夹）<br>-u UID：指定 UID，这个 UID 必须是大于等于500，并没有其他用户占用的 UID<br>-g GID/GROUPNAME：指定默认组，可以是 GID 或者 GROUPNAME，同样也必须真实存在<br>-G GROUPS：指定额外组<br>-c COMMENT：指定用户的注释信息<br>-d PATH：指定用户的家目录</td><td></td><td></td></tr><tr><td>设置密码</td><td>passwd cxvh2021—&gt;然后设置密文密码，再重复即可</td><td></td><td></td></tr><tr><td>删除用户</td><td>userdel cxvh2021</td><td></td><td></td></tr><tr><td>删用户的目录</td><td>rm -rf cxvh2021</td><td></td><td></td></tr><tr><td>切换用户</td><td>su cxvh2021</td><td></td><td></td></tr><tr><td>添加用户组</td><td>groupadd groupname（cat /etc/group 可以看到自己的分组和分组id）</td><td></td><td></td></tr><tr><td>删除用户组</td><td>groupdel groupname</td><td></td><td></td></tr><tr><td>修改用户权限有一个简单粗暴的方法</td><td>vi /etc/password（关于uid）<br>0 表示管理员（root）<br>1 - 500 表示系统用户<br>501 - 65535 表示普通用户 一般是这样的，不过不同的Linux版本可能有些偏差<br>chown [-cfhvR] [–help] [–version] user[:group] file…</td><td></td><td></td></tr><tr><td>创建文件夹</td><td>mkdir test</td><td></td><td></td></tr><tr><td>创建文件</td><td>echo “#test” &gt;&gt; README.md<br>echo ‘{}’ &gt;&gt; .babelrc<br>echo myname&gt;abv.txt<br>echo text&gt;abv.txt</td><td></td><td></td></tr><tr><td>查看端口</td><td>netstat -tlunp</td><td></td><td></td></tr><tr><td>端口放行</td><td>firewall-cmd –add-port=81/tcp –permanent<br>firewall-cmd –reload</td><td></td><td></td></tr><tr><td>Shell 命令-sed</td><td></td><td></td><td></td></tr><tr><td>字符串替换</td><td>sed -i “s/artitalk:/artitalk: true/“ _config.butterfly.yml</td><td></td><td></td></tr><tr><td>重启</td><td>reboot 普通重启<br>shutdown -r now 立刻重启(root用户使用)<br>shutdown -r 10 过10分钟自动重启(root用户使用)<br>shutdown -r 20:35 在时间为20:35时候重启(root用户使用)</td><td></td><td></td></tr><tr><td>取消重启</td><td>shutdown -c命令取消shutdown重启</td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td><td></td></tr></tbody></table><blockquote><p>目录介绍</p></blockquote><figure class="highlight md"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">home # 个人目录</span><br><span class="line"> soft</span><br><span class="line"> down</span><br><span class="line"> 其他的文件目录</span><br><span class="line">etc # 软件配置目录</span><br><span class="line">sys # 系统目录</span><br><span class="line">usr # 系统可执行文件放在这</span><br><span class="line"> sbin # 超级管理员要用到的一些执行文件</span><br><span class="line"> local # 本地执行的一些文件</span><br><span class="line">var # 日志</span><br></pre></td></tr></tbody></table></figure><blockquote><p>文件相关</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ls <span class="comment"># 目录</span></span><br><span class="line">mkdir <span class="built_in">test</span> <span class="comment"># 创建文件夹</span></span><br><span class="line"><span class="built_in">cd</span> <span class="built_in">test</span> <span class="comment"># 进入文件夹</span></span><br><span class="line">touch test.txt <span class="comment"># 创建文件</span></span><br><span class="line"><span class="comment"># vi test.txt 创建并编辑文件</span></span><br><span class="line">vim test.txt <span class="comment"># 编辑文件</span></span><br><span class="line">:wq <span class="comment"># 保存文件</span></span><br><span class="line">:q! <span class="comment"># 不报错</span></span><br><span class="line">cat test.txt <span class="comment"># 查看文件内容</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'123'</span> &gt;&gt; test.txt <span class="comment"># 追加内容</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'321'</span> &gt; test.txt <span class="comment"># 覆盖内容</span></span><br><span class="line">rm test.txt <span class="comment"># 删除文件 按 y</span></span><br><span class="line">nkdir testdir <span class="comment"># 创建文件夹</span></span><br><span class="line">rm -r testdir <span class="comment"># 删除目录 按 y</span></span><br><span class="line">rm -rf testdir <span class="comment"># 强制删除（谨慎！！！）</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>下载/压缩/解压</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget http://aa.cc/aaa.tar.gz</span><br><span class="line">tar zxvf aaa.tar.gz <span class="comment"># zxvf z-&gt;代表 gz 结尾 x-&gt;解压缩 v-&gt;显示所有解压过程 f-&gt;解压到 aaa 的文件夹里面</span></span><br><span class="line">tar zcvf bbb.gar.gz aaa <span class="comment"># </span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><code>grep</code> 命令</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep docker <span class="comment"># grep 搜索的意思 后面跟关键字</span></span><br><span class="line"><span class="built_in">kill</span> -9  21937 <span class="comment"># 终止进程 9-&gt;是强制终止的意思 21937-&gt;是pid</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>查看系统服务状态</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">service sshd status <span class="comment"># 查看服务状态</span></span><br><span class="line">service sshd restart <span class="comment"># 重启服务-&gt;Redirecting to /bin/systemctl restart sshd.service</span></span><br><span class="line">service sshd stop <span class="comment"># 关闭服务</span></span><br><span class="line">systemctl status firewalld.service</span><br><span class="line"></span><br><span class="line">service ssh status</span><br></pre></td></tr></tbody></table></figure><blockquote><p>连接服务器</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 22 root@127.0.0.1 <span class="comment"># ssh-&gt;安全外壳协议(Secure Shell 缩写) -p-&gt;指定端口 22端口 root-&gt;用户名 127.0.0.1-&gt;服务器地址</span></span><br><span class="line">ssh root@127.0.0.1 <span class="comment"># 使用默认端口连接</span></span><br><span class="line">ssh -v username@cxvh.com <span class="comment"># 使用域名链接</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p>修改 SSH 默认端口</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">service sshd status</span><br><span class="line">netstat -anlp | grep sshd</span><br><span class="line">vi /etc/ssh/sshd_config <span class="comment"># Port 23 自定义端口</span></span><br><span class="line">semanage port -a -t ssh_port_t -p tcp 23 <span class="comment"># 如果找不到 semanage 继续下面操作安装 semanage -bash:semanage:command not found</span></span><br><span class="line">yum whatprovides semanage <span class="comment"># 反查命令，找那个包有这个命令 # policycoreutils-python-2.5-29.el7.x86_64 : SELinux police core</span></span><br><span class="line">yum install -y policycoreutils-python</span><br><span class="line">semanage port -a -t ssh_port_t -p tcp 23</span><br><span class="line">semanage port -l |grep ssh</span><br><span class="line">semanage port -d -t ssh_port_t -p tcp 27000 <span class="comment"># 删除端口</span></span><br><span class="line">semanage port -l |grep ssh</span><br><span class="line">service ssh restart</span><br><span class="line">ssh -p 23 root@127.0.0.1 <span class="comment"># 重新登录</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><code>SSH</code>密钥登录</p></blockquote><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 本地</span></span><br><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line">ls</span><br><span class="line"><span class="comment"># ssh-keygen # 生成OPENSSH密钥，和 git 类似</span></span><br><span class="line">ssh-keygen -t rsa -m pem <span class="comment"># 生成 pem 密钥</span></span><br><span class="line">ls <span class="comment"># .pub 是公钥</span></span><br><span class="line">vi config <span class="comment"># 编辑</span></span><br><span class="line">&gt; Host cxvh</span><br><span class="line">&gt;   Port 23</span><br><span class="line">&gt;   HostName 127.0.0.1</span><br><span class="line">&gt;   User root</span><br><span class="line">&gt;   IdentityFile ~/.ssh/id_rsa</span><br><span class="line">&gt;   IdentitiesOnly yes</span><br><span class="line">cat ~/.ssh/id_rsa.pub <span class="comment"># 复制公钥</span></span><br><span class="line"><span class="comment"># 远端</span></span><br><span class="line"><span class="built_in">cd</span> ~/.ssh/ <span class="comment"># 如果不存在 .ssh 目录的时候手动创建 mkdir -p ~/.ssh</span></span><br><span class="line">vi authorized_keys <span class="comment"># 粘贴本地公钥</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过 ssh 链接</span></span><br></pre></td></tr></tbody></table></figure><h3 id="安装go"><a href="#安装go" class="headerlink" title="安装go"></a>安装go</h3><ul><li><code>wget https://dl.google.com/go/go1.10.3.linux-amd64.tar.gz</code></li><li><code>tar -C /usr/local -zxvf go1.10.3.linux-amd64.tar.gz</code></li><li><code>vim /etc/profile</code>如果没有安装下<code>sudo apt-get install vim</code></li><li>把这两个<code>export GOROOT=/usr/local/go</code> <code>export PATH=$PATH:$GOROOT/bin</code></li><li>``</li><li>``</li></ul><h3 id="报错整理："><a href="#报错整理：" class="headerlink" title="报错整理："></a>报错整理：</h3><blockquote><p>yum 相关</p></blockquote><ul><li><code>yum -y upgrade</code>升级</li><li><code>yum -y install yum-utils</code>yum仓库管理工具</li><li><code>yum versionlock clear</code>解除锁的状态</li></ul><p>执行<code>yum install git</code>报错</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Loaded plugins: fastestmirror</span><br><span class="line"></span><br><span class="line">File contains no section headers.</span><br><span class="line">file: file:<span class="comment">///etc/yum.repos.d/nginx.repo, line: 1</span></span><br><span class="line">'nx-stable]\n'</span><br></pre></td></tr></tbody></table></figure><ul><li>原因：<ul><li>没有配置yum源</li></ul></li><li>解决方法<ul><li>修改<code>vi /etc/yum.repos.d/CentOS-Base.repo</code></li><li>删除旧的，重新下载阿里的<ul><li><code>rm -f /etc/yum.repos.d/CentOS-Base.repo</code></li><li><code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</code></li><li><code>yum clean all</code></li></ul></li><li>如果上面两种方法都不行，可尝试<ul><li><code>rm -f /etc/yum.repos.d/*</code></li><li><code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</code></li><li><code>yum clean all</code></li></ul></li></ul></li></ul><hr><blockquote><p>node 相关</p></blockquote><p>使用<code>npm install -g cnpm</code>安装<code>cnpm</code>不起作用</p><ul><li>解决方法：<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code></li></ul><hr><blockquote><p>shell</p></blockquote><p>缺少执行权限，<code>chmod +x bin/process/test.sh</code></p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">internal/child_process.js:<span class="number">403</span></span><br><span class="line">    throw errnoException(err, 'spawn');</span><br><span class="line">    ^</span><br><span class="line"></span><br><span class="line">Error: spawn UNKNOWN</span><br><span class="line">    at ChildProcess.spawn (internal/child_process.js:<span class="number">403</span>:<span class="number">11</span>)</span><br><span class="line">    <span class="function">at <span class="title">spawn</span> <span class="params">(child_process.js:<span class="number">553</span>:<span class="number">9</span>)</span></span></span><br><span class="line">    at Object.execFile (child_process.js:237:17)</span><br><span class="line">    at Object.&lt;anonymous&gt; (E:\learn\cxvh-cli-test\test\bin\process\index.js:<span class="number">11</span>:<span class="number">4</span>)</span><br><span class="line">    at Module._compile (internal/modules/cjs/loader.js:<span class="number">1063</span>:<span class="number">30</span>)</span><br><span class="line">    at Object.Module._extensions..js (internal/modules/cjs/loader.js:<span class="number">1092</span>:<span class="number">10</span>)</span><br><span class="line">    at Module.load (internal/modules/cjs/loader.js:<span class="number">928</span>:<span class="number">32</span>)</span><br><span class="line">    at Function.Module._load (internal/modules/cjs/loader.js:<span class="number">769</span>:<span class="number">14</span>)</span><br><span class="line">    at Module.require (internal/modules/cjs/loader.js:<span class="number">952</span>:<span class="number">19</span>)</span><br><span class="line">    <span class="function">at <span class="title">require</span> <span class="params">(internal/modules/cjs/helpers.js:<span class="number">88</span>:<span class="number">18</span>)</span> </span>{</span><br><span class="line">  errno: <span class="number">-4094</span>,</span><br><span class="line">  code: 'UNKNOWN',</span><br><span class="line">  syscall: 'spawn'</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><hr><blockquote><p>sudo</p></blockquote><ul><li><p>用户不在<code>sudo</code>文件<code>users is not in the sudoers file</code>？</p></li><li><p><code>root</code>用户执行命令：<code>visudo</code></p></li><li><p>在末尾添加用户，如：<code>yourusername ALL=(ALL) ALL</code></p></li><li><p>保存退出即可。</p></li></ul>